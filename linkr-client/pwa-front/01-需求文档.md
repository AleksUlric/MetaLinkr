# MetaLinkr PWA 需求文档

## 项目概述

MetaLinkr 是一个综合性的PWA应用，整合社交交友、电商购物、宠物服务和地点打卡等功能，通过积分养成系统增强用户粘性。

## 核心功能模块

### 1. 社交交友模块 (Social)
- **文字聊天**: 实时消息、表情包、语音消息
- **视频连线**: 一对一视频通话、群组视频
- **广场动态**: 发布动态、点赞评论、话题讨论
- **智能匹配系统**:
  - **文字匹配**: 基于兴趣标签的智能推荐
  - **语音匹配**: 语音聊天匹配、声音识别
  - **语音派对**: 多人语音房间、主题讨论
  - **视频匹配**: 视频聊天匹配、颜值识别
  - **综合匹配**: 多维度匹配算法

### 2. 电商模块 (E-commerce)
- **商品浏览**: 分类筛选、搜索、商品详情
- **购物功能**: 购物车、结算、支付
- **订单管理**: 订单跟踪、评价、退换货
- **推荐系统**: 个性化商品推荐

### 3. 宠物店模块 (Pet Store)
- **宠物托管**: 预约托管、实时监控、健康报告
- **宠物用品**: 饲料、玩具、医疗用品
- **宠物档案**: 健康记录、成长日记
- **服务预约**: 美容、医疗、训练

### 4. 地点打卡模块 (Location Check-in)
- **位置分享**: 实时位置、历史轨迹
- **打卡记录**: 地点签到、照片分享
- **收集系统**: 地点徽章、成就解锁
- **社交地图**: 好友位置、热门地点

### 5. 直播模块 (Live Streaming)
- **直播功能**: 实时直播、互动聊天
- **直播分类**: 才艺表演、生活分享、游戏直播
- **互动功能**: 弹幕评论、礼物打赏、连麦互动
- **直播管理**: 直播间设置、观众管理、收益统计

### 6. 短视频模块 (Short Video)
- **视频创作**: 拍摄编辑、特效滤镜、音乐配乐
- **视频浏览**: 推荐算法、分类筛选、搜索功能
- **互动功能**: 点赞评论、分享转发、关注收藏
- **创作工具**: 剪辑功能、特效库、音乐库

### 7. 游戏中心模块 (Game Center)
- **游戏信息**: 王者荣耀、英雄联盟、和平精英等热门游戏
- **段位显示**: 游戏段位、等级、胜率统计
- **开黑房间**: 创建房间、加入房间、语音开黑
- **游戏社交**: 游戏好友、战绩分享、游戏动态
- **游戏活动**: 游戏赛事、活动奖励、限时任务

### 8. 积分养成系统 (Gamification)
- **积分获取**: 签到、互动、消费、打卡、游戏
- **皮肤系统**: 头像框、主题、特效、个性化装扮
- **等级系统**: 经验值、特权解锁、身份标识
- **任务系统**: 日常任务、成就挑战、活动任务

## 技术架构

### 前端技术栈
- **PWA框架**: Vue 3 + Vite
- **UI组件**: Element Plus / Ant Design Vue
- **状态管理**: Pinia
- **路由**: Vue Router
- **PWA功能**: Workbox、Service Worker
- **地图服务**: 高德地图 / 百度地图
- **实时通信**: WebSocket / Socket.io

### 后端技术栈
- **框架**: Spring Boot
- **数据库**: MySQL + Redis
- **消息队列**: RabbitMQ / Kafka
- **文件存储**: MinIO / 阿里云OSS
- **实时通信**: WebSocket
- **支付**: 微信支付 / 支付宝

## 页面结构设计

### 主要页面
1. **首页**: 功能导航、推荐内容、快捷入口
2. **社交页**: 广场动态、聊天列表、匹配推荐
3. **匹配页**: 智能匹配、语音派对、视频匹配
4. **直播页**: 直播列表、直播间、直播管理
5. **短视频页**: 视频推荐、视频播放、创作工具
6. **游戏页**: 游戏信息、开黑房间、游戏社交
7. **商城页**: 商品分类、购物车、订单管理
8. **宠物页**: 宠物档案、托管服务、用品商城
9. **打卡页**: 地图视图、打卡记录、收集进度
10. **个人页**: 用户信息、积分等级、设置

### 导航设计
- **底部导航栏**: 首页、社交、匹配、直播、短视频、游戏、商城、宠物、打卡、我的
- **顶部导航**: 搜索、消息、通知
- **侧边栏**: 设置、帮助、关于

## 用户流程设计

### 新用户注册流程
1. 手机号注册 → 2. 基本信息填写 → 3. 兴趣标签选择 → 4. 宠物信息(可选) → 5. 完成注册

### 核心使用流程
1. **社交流程**: 浏览广场 → 发布动态 → 互动交流 → 私聊匹配
2. **匹配流程**: 选择匹配类型 → 设置匹配条件 → 开始匹配 → 建立连接
3. **直播流程**: 创建直播间 → 开始直播 → 互动聊天 → 收益统计
4. **短视频流程**: 拍摄视频 → 编辑制作 → 发布分享 → 互动反馈
5. **游戏流程**: 绑定游戏账号 → 查看游戏信息 → 创建开黑房间 → 语音开黑
6. **购物流程**: 浏览商品 → 加入购物车 → 结算支付 → 订单跟踪
7. **宠物服务**: 选择服务 → 预约时间 → 支付确认 → 服务完成
8. **打卡流程**: 选择地点 → 拍照打卡 → 分享动态 → 获得积分

## 积分系统设计

### 积分获取方式
- **日常签到**: +10积分/天
- **发布动态**: +5积分/条
- **互动点赞**: +1积分/次
- **完成打卡**: +20积分/次
- **购物消费**: 1元=1积分
- **邀请好友**: +100积分/人

### 积分消费
- **皮肤购买**: 100-1000积分
- **特权解锁**: 500-5000积分
- **商品抵扣**: 100积分=1元
- **服务优惠**: 积分兑换优惠券

## 智能匹配系统设计

### 匹配算法
- **兴趣匹配**: 基于用户兴趣标签的相似度计算
- **地理位置**: 距离权重计算，优先推荐附近用户
- **活跃度匹配**: 根据用户活跃时间进行匹配
- **语音特征**: 声音相似度分析，音色匹配
- **视频特征**: 颜值评分、表情分析
- **综合评分**: 多维度权重计算，智能推荐

### 匹配类型
1. **文字匹配**
   - 基于兴趣标签的智能推荐
   - 支持筛选条件设置
   - 实时匹配结果更新

2. **语音匹配**
   - 语音聊天匹配
   - 声音特征识别
   - 语音质量评估

3. **语音派对**
   - 多人语音房间
   - 主题讨论房间
   - 房间管理和权限控制

4. **视频匹配**
   - 视频聊天匹配
   - 颜值识别和评分
   - 实时视频质量优化

### 匹配流程
1. **用户设置**: 匹配偏好、隐私设置
2. **算法匹配**: 多维度匹配计算
3. **结果展示**: 推荐用户列表
4. **用户选择**: 喜欢/不喜欢/超级喜欢
5. **建立连接**: 开始聊天或通话

## 数据模型设计

### 核心实体
- **用户(User)**: 基本信息、积分、等级
- **动态(Post)**: 内容、位置、互动数据
- **商品(Product)**: 商品信息、库存、价格
- **订单(Order)**: 订单状态、支付信息
- **宠物(Pet)**: 宠物档案、健康记录
- **打卡(CheckIn)**: 位置、时间、内容
- **积分(Points)**: 获取记录、消费记录
- **匹配记录(Match)**: 匹配历史、成功率统计
- **语音房间(VoiceRoom)**: 房间信息、参与者列表
- **视频通话(VideoCall)**: 通话记录、质量统计
- **直播间(LiveRoom)**: 直播信息、观众列表、收益统计
- **短视频(ShortVideo)**: 视频内容、互动数据、创作信息
- **直播记录(LiveRecord)**: 直播历史、观看数据
- **视频互动(VideoInteraction)**: 点赞、评论、分享记录
- **游戏账号(GameAccount)**: 游戏信息、段位数据、战绩统计
- **开黑房间(GameRoom)**: 房间信息、参与者列表、语音状态
- **游戏好友(GameFriend)**: 好友关系、游戏记录、互动数据

## 安全与隐私

### 数据安全
- 用户数据加密存储
- API接口鉴权
- 支付安全保护
- 隐私信息脱敏

### 隐私保护
- 位置信息权限控制
- 个人信息访问控制
- 数据使用透明度
- 用户数据删除权

## 性能优化

### PWA优化
- 离线缓存策略
- 资源预加载
- 图片懒加载
- 代码分割

### 用户体验
- 加载状态提示
- 错误处理机制
- 网络状态检测
- 响应式设计

## 部署方案

### 前端部署
- 静态资源CDN
- Service Worker缓存
- 渐进式加载
- 离线功能支持

### 后端部署
- 微服务架构
- 容器化部署
- 负载均衡
- 数据库集群

## 开发计划

### 第一阶段 (MVP)
- 用户注册登录
- 基础社交功能
- 简单商城功能
- 基础积分系统

### 第二阶段
- 宠物服务模块
- 地点打卡功能
- 视频通话功能
- 高级积分系统

### 第三阶段
- AI推荐系统
- 高级社交功能
- 数据分析平台
- 运营管理后台
